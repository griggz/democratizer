(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(45),o=a.n(l),s=(a(54),a(2)),c=a(3),i=a(6),m=a(4),u=a(5),d=a(173),h=a(175),p=a(174),f=(a(55),a(7)),b=(a(16),a(8)),v=a.n(b),g=a(171),E=a(12),k=a.n(E),C=a(20),y=a.n(C),S=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.comm,t=this.props.elClass,a="card"===t?"d-block":"d-none";return r.a.createElement("div",{class:"comms-list"},void 0!==e?r.a.createElement("div",{className:t},r.a.createElement("h1",{class:"comms-title"},r.a.createElement(g.a,{maintainScrollPosition:!1,to:{pathname:"/site-management/comms/".concat(e.slug,"/"),state:{fromDashboard:!1}}},e.title),"\xa0",r.a.createElement("small",{className:"publish_date text-muted",id:"alt"},"(Updated: ",r.a.createElement(y.a,{fromNow:!0,ago:!0},e.updated)," ago)")),r.a.createElement("p",{className:a},r.a.createElement(k.a,{source:e.content.slice(0,200).trim().concat("...")}),r.a.createElement(g.a,{maintainScrollPosition:!1,to:{pathname:"/site-management/comms/".concat(e.slug,"/"),state:{fromDashboard:!1}}},"Read more"))):"")}}]),t}(n.Component),N=a(10),j=a.n(N),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).toggleCommListClass=a.toggleCommListClass.bind(Object(f.a)(a)),a.handleNewComm=a.handleNewComm.bind(Object(f.a)(a)),a.loadMoreComms=a.loadMoreComms.bind(Object(f.a)(a)),a.state={comms:[],commsPublic:[],commsListClass:"card",previous:null,author:!1,draft:null,count:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"loadMoreComms",value:function(){var e=this.state.next;null===e&&void 0===e||this.loadComms(e)}},{key:"loadComms",value:function(e){var t="/api/comms/";void 0!==e&&(t=e);var a=this,n={method:"GET",headers:{"Content-Type":"application/json"}},r=v.a.load("csrftoken");void 0!==r&&(n.credentials="include",n.headers["X-CSRFToken"]=r),fetch(t,n).then(function(e){return e.json()}).then(function(e){var t=e.results.filter(function(e){return!1===e.draft});a.setState({comms:a.state.comms.concat(e.results),commsPublic:a.state.commsPublic.concat(t),next:e.next,previous:e.previous,staff:e.staff,draft:e.draft,count:e.count})}).catch(function(e){console.log("error",e)})}},{key:"handleComms",value:function(e){var t=e.filter(function(e){return!1===e.draft});this.setState({commsPublic:t})}},{key:"handleNewComm",value:function(e){var t=this.state.comms;t.unshift(e),this.setState({comms:t})}},{key:"toggleCommListClass",value:function(e){e.preventDefault(),""===this.state.commsListClass?this.setState({commsListClass:"card"}):this.setState({commsListClass:""})}},{key:"componentDidMount",value:function(){this.setState({comms:[],commsListClass:"card",next:null,previous:null,count:0}),this.loadComms()}},{key:"render",value:function(){var e=this.state.comms,t=this.state.commsPublic,a=this.state.commsListClass,n=this.state.staff,l=this.state.next;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h1",null,!0===n?r.a.createElement(g.a,{className:"mr-2",maintainScrollPosition:!1,to:{pathname:"/site-management/comms/create/",state:{fromDashboard:!1}}},r.a.createElement(j.a,{variant:"outline-dark",type:"button"},"Create New Comm")):"",r.a.createElement(j.a,{onClick:this.toggleCommListClass},"List View")),r.a.createElement("br",null),!0===n?r.a.createElement("div",null,e.length>0?e.map(function(e,t){return r.a.createElement(S,{comm:e,elClass:a})}):r.a.createElement("p",null,"No comms Found")):r.a.createElement("div",null,e.length>0?t.map(function(e,t){return r.a.createElement(S,{comm:e,elClass:a})}):r.a.createElement("p",null,"No Comms Found")),r.a.createElement("div",{className:"d-flex flex-column text-center"},null!==l?r.a.createElement(j.a,{variant:"outline-dark",onClick:this.loadMoreComms},"Load more"):""),r.a.createElement("br",null))}}]),t}(n.Component),w=a(24),R=a.n(w),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleCommItemUpdated=a.handleCommItemUpdated.bind(Object(f.a)(a)),a.state={slug:null,comm:null,doneLoading:!1,owner:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleCommItemUpdated",value:function(e){this.setState({comm:e})}},{key:"loadComm",value:function(e){var t="/api/comms/".concat(e,"/"),a=this,n={method:"GET",headers:{"Content-Type":"application/json"}},r=v.a.load("csrftoken");void 0!==r&&(n.credentials="include",n.headers["X-CSRFToken"]=r),fetch(t,n).then(function(e){return 404===e.status&&console.log("Page not found"),e.json()}).then(function(e){e.detail?a.setState({doneLoading:!0,comm:null}):a.setState({doneLoading:!0,comm:e,owner:e.owner})}).catch(function(e){console.log("error",e)})}},{key:"componentDidMount",value:function(){if(this.setState({slug:null,comm:null}),this.props.match){var e=this.props.match.params.slug;this.setState({slug:e,doneLoading:!1}),this.loadComm(e)}}},{key:"render",value:function(){var e=this.state.doneLoading,t=this.state.comm,a=this.state.owner,n={display:"block",height:"1px",border:0,borderTop:"1px solid #ccc",margin:"1em 0",padding:"0",color:"white"};return r.a.createElement("p",null,!0===e?r.a.createElement("div",{class:"Main"},null===t?"Not Found":r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement("h1",{id:"alt"},t.title,r.a.createElement("small",{class:"text-muted"},"(",t.slug,")")),r.a.createElement("h4",{id:"alt"},"By ",t.author.username,"\xa0",!0===a?r.a.createElement(g.a,{className:"mr-2",maintainScrollPosition:!1,to:{pathname:"/site-management/comms/".concat(t.slug,"/edit"),state:{post:t}}},r.a.createElement(j.a,{variant:"outline-dark",type:"button",id:"edit-button"},"Edit")):""," "),r.a.createElement("hr",{style:n}),r.a.createElement("h4",null,r.a.createElement("small",{className:"publish_date",id:"alt"}," Updated: ",r.a.createElement(y.a,{fromNow:!0,ago:!0},t.updated)," ago\xa0")),r.a.createElement("hr",{style:n}),r.a.createElement("p",{id:"alt"},r.a.createElement(k.a,{source:t.content}))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("br",null)))):r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"spinner"},r.a.createElement(R.a,{type:"bars",color:"white"}))))}}]),t}(n.Component),T=a(19),L=(a(42),a(172)),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(f.a)(a)),a.handleDraftChange=a.handleDraftChange.bind(Object(f.a)(a)),a.clearForm=a.clearForm.bind(Object(f.a)(a)),a.commTitleRef=r.a.createRef(),a.commContentRef=r.a.createRef(),a.commSiteLocationRef=r.a.createRef(),a.commSlugRef=r.a.createRef(),a.state={draft:!1,title:null,content:null,site_location:"",redirect:!1,redirectLink:null,errors:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"createComm",value:function(e){var t=this,a=v.a.load("csrftoken"),n=this;if(void 0!==a){var r={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify(e),credentials:"include"};fetch("/api/comms/",r).then(function(e){return e.json()}).then(function(e){n.setState({redirectLink:"/site-management/comms/".concat(e.slug,"/")}),n.props.newCommItemCreated&&n.props.newCommItemCreated(e),n.clearForm()}).catch(function(e){console.log("error",e),alert("An error occurred, please try again later.")}).then(function(){return t.setState({redirect:!0})})}}},{key:"updateComm",value:function(e){var t=this,a=this.props.post,n="/api/comms/".concat(a.slug,"/"),r=v.a.load("csrftoken"),l=this;if(void 0!==r){var o={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify(e),credentials:"include"};fetch(n,o).then(function(e){return e.json()}).then(function(e){l.setState({redirectLink:"/site-management/comms/".concat(e.slug)}),l.props.commItemUpdated&&l.props.commItemUpdated(e)}).catch(function(e){console.log("error",e),alert("An error occurred, please try again later.")}).then(function(){return t.setState({redirect:!0})})}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state;void 0!==this.props.post?this.updateComm(t):this.createComm(t)}},{key:"handleInputChange",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;"title"===t&&a.length>120&&alert("This title is too long"),this.setState(Object(T.a)({},t,a))}},{key:"handleDraftChange",value:function(e){this.setState({draft:!this.state.draft})}},{key:"clearForm",value:function(e){e&&e.preventDefault(),this.commCreateForm.reset(),this.defaultState()}},{key:"clearFormRefs",value:function(){this.commTitleRef.current="",this.commContentRef.current="",this.commSiteLocationRef.current="",this.commSlugRef.current=""}},{key:"defaultState",value:function(){this.setState({draft:!1,title:null,content:null,site_location:null,slug:null})}},{key:"componentDidMount",value:function(){var e=this.props.post;void 0!==e?this.setState({draft:e.draft,title:e.title,content:e.content,site_location:e.site_location,slug:e.slug}):this.defaultState()}},{key:"render",value:function(){var e=this,t=this.state.title,a=this.state.content,n=this.state.site_location,l=this.state.redirect,o=this.state.redirectLink,s=this.state.slug;return l?r.a.createElement(L.a,{to:o}):r.a.createElement("div",null,r.a.createElement("h1",{id:"alt"},"Create Comm"),r.a.createElement("form",{onSubmit:this.handleSubmit,ref:function(t){return e.commCreateForm=t}},r.a.createElement("div",{className:"form-group",id:"top-row-form"},r.a.createElement("label",{htmlFor:"draft"},r.a.createElement("input",{type:"checkbox",checked:this.state.draft,id:"draft",name:"draft",className:"mr-2",onChange:this.handleDraftChange})),r.a.createElement(j.a,{variant:"outline-dark",onClick:function(t){t.preventDefault(),e.handleDraftChange()}},"Draft"),r.a.createElement("label",{htmlFor:"site_location"},"Site Location:",r.a.createElement("span",null," "),r.a.createElement("select",{value:n,id:"site_location",name:"site_location",ref:this.commSiteLocationRef,className:"mr-2",onChange:this.handleInputChange},r.a.createElement("option",{value:"select"},"Select"),r.a.createElement("option",{value:"comms"},"comms"),r.a.createElement("option",{value:"scrape"},"scrape"),r.a.createElement("option",{value:"landing"},"landing"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"create-submit"},"Save")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"title",name:"title",value:t,className:"form-control",placeholder:"Comms Title",ref:this.commTitleRef,onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"slug",name:"slug",readOnly:!0,value:s,className:"form-control",ref:this.commSlugRef})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"content"},r.a.createElement("small",null,"Markdown ",r.a.createElement("a",{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank",rel:"noopener noreferrer"},"guide"),' For local images use this ex. "/static/images/deploy_process.svg"')),r.a.createElement("textarea",{id:"content",ref:this.commContentRef,name:"content",value:a,className:"form-control",placeholder:"Tell me something!",onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"preview"},r.a.createElement("div",{className:"preview-text"},r.a.createElement(k.a,{source:a})))))}}]),t}(n.Component),D=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.location.state.post;return r.a.createElement("div",{class:"col-md-10","align-items":"center"},null!==e?r.a.createElement(F,{post:e}):r.a.createElement(F,null))}}]),t}(n.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.reviews,t=this.props.site,a={display:"block",height:"1px",border:0,borderTop:"1px solid #ccc",margin:"1em 0",padding:"0",color:"white"};return r.a.createElement("div",null,"yelp"===t?r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,e.author)," |"),r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,e.date)," |"),r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,e.rating)),r.a.createElement("p",{className:"dash"},e.review),r.a.createElement("hr",{style:a})):r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,e.current_employee)," |"),r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,e.job_title)," |"),r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,e.location_city,", ",e.location_state)," |"),r.a.createElement("td",{className:"dash h5"},r.a.createElement("b",null,"(Rating: ",e.rating,")")),r.a.createElement("p",{className:"dash"},e.review),r.a.createElement("hr",{style:a})))}}]),t}(n.Component),I=a(46),P=a.n(I),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={slug:null,scrape:null,doneLoading:!1,visible:25,words:null,site:a.props.location.state.site},a.loadMore=a.loadMore.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"loadMore",value:function(){this.setState(function(e){return{visible:e.visible+25}})}},{key:"handlePostItemUpdated",value:function(e){this.setState({scrape:e})}},{key:"validateJson",value:function(e){return"indeed"===this.state.site?(e.reviews=e.indeed_reviews,delete e.indeed_reviews,e):e}},{key:"loadReviews",value:function(e){var t="/api/scrape/".concat(this.state.site,"/").concat(e),a=this,n={method:"GET",headers:{"Content-Type":"application/json"}},r=v.a.load("csrftoken");void 0!==r&&(n.credentials="include",n.headers["X-CSRFToken"]=r),fetch(t,n).then(function(e){return 404===e.status&&console.log("Page not found"),e.json()}).then(function(e){e.detail?a.setState({doneLoading:!0,scrape:null}):a.setState({doneLoading:!0,scrape:a.validateJson(e)})}).catch(function(e){console.log("error",e)})}},{key:"componentDidMount",value:function(){if(this.setState({slug:null}),this.props.match){var e=this.props.match.params.slug;this.setState({slug:e,doneLoading:!1}),this.loadReviews(e)}}},{key:"buildUrl",value:function(){var e=this.state.scrape;return"https://vvayne.io/scrape/results/".concat(e.slug)}},{key:"buildFileName",value:function(){var e=this.state.scrape;return"".concat(e.business_name,".csv")}},{key:"render",value:function(){var e=this,t=this.state.doneLoading,a=this.state.scrape;return r.a.createElement("section",{className:"Results"}," ",!0===t?r.a.createElement("div",{className:"container-fluid"}," ",null===a?"No Reviews Found...In order to use this\nscraper you must be a registered user and\nlogged in. If you are logged in and receiving\nthis error, please confirm that the business\nyou are attempting to scrape has reviews.":r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("h1",null,a.business_name," Reviews"),r.a.createElement(j.a,{variant:"secondary",onClick:function(){return P()(a.reviews,e.buildFileName())}},"Download Data"),"\xa0",r.a.createElement(g.a,{maintainScrollPosition:!1,to:{pathname:"/scrape",state:{fromDashboard:!1}}},r.a.createElement("button",{className:"btn btn-primary"},"New Scrape")),r.a.createElement("hr",{style:{display:"block",height:"1px",border:0,borderTop:"1px solid #ccc",margin:"1em 0",padding:"0",color:"white"}}),a.reviews.length>0?a.reviews.slice(0,this.state.visible).map(function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement(_,{reviews:e,site:a.site}))}):r.a.createElement("p",null,"No Reviews Found"),this.state.visible<a.reviews.length&&r.a.createElement("div",{className:"d-flex flex-column text-center"},r.a.createElement(j.a,{onClick:this.loadMore,variant:"outline-light",type:"button",className:"load-more"},"Load more"))))):r.a.createElement("div",{class:"spinner-border",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading...")))}}],[{key:"routeChange",value:function(){return r.a.createElement(L.a,{to:"/scrape/create"})}}]),t}(n.Component),q=a(47),A=a.n(q);var U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(f.a)(a)),a.clearForm=a.clearForm.bind(Object(f.a)(a)),a.scrapeLinkRef=r.a.createRef(),a.scrapePagesRef=r.a.createRef(),a.state={link:null,pages_amount:null,redirect:!1,redirectLink:null,slug:null,scraping:null,errors:null,site:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"createScrape",value:function(e){var t=this,a=this.identifySite(e),n="/api/scrape/".concat(a),r=v.a.load("csrftoken"),l=this;if(void 0!==r){var o={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify(e),credentials:"include"};fetch(n,o).then(function(e){return e.json()}).then(function(e){l.setState({redirectLink:"/scrape/results/".concat(e.slug),scraping:null,site:a}),l.clearForm()}).catch(function(e){console.log("error",e),alert("An error occurred, please try again later.")}).then(function(){return t.setState({redirect:!0})})}}},{key:"identifySite",value:function(){var e=this.state;return e.link.includes("yelp.com")?"yelp":e.link.includes("indeed.com")?"indeed":void 0}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=this.props.scrape,n=function(e){var t={},a=["https","http","www."].map(function(t,a){return e.link.startsWith(t)});return e.link?a.includes(!0)?["yelp.com","indeed.com"].some(function(t){return e.link.includes(t)})||(t.link="Address is not a valid yelp or indeed link"):t.link="Address must be a valid link and begin with http, https or www.":t.link="Link address is required",parseInt(e.page_amount)>100&&void 0===!e.page_amount&&t.push("Number of pages must be less than 100. I didn't think there were business with more than 100 pages of reviews. If you find one, let me know I'll adjust the code."),t}(t);void 0===a&&(Object.keys(n).length>0?this.setState({errors:n}):0===Object.keys(n).length?(this.setState({scraping:!0}),this.createScrape(t)):this.clearFormRefs())}},{key:"handleInputChange",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;"link"===t&&a.length>120&&alert("This link is too long"),"page_amount"===t&&parseInt(a)>100&&alert("This app can't process more than 100 pages."),this.setState(Object(T.a)({},t,a))}},{key:"clearForm",value:function(e){e&&e.preventDefault(),this.scrapeCreateForm.reset(),this.defaultState()}},{key:"clearFormRefs",value:function(){this.scrapeLinkRef.current="",this.scrapePagesRef.current=""}},{key:"defaultState",value:function(){this.setState({link:null})}},{key:"componentDidMount",value:function(){var e=this.props.scrape;void 0!==e?this.setState({link:e.link,page_number:e.page_number}):this.defaultState()}},{key:"render",value:function(){var e=this,t=this.state.link,a=this.state.page_amount,n=this.state.redirect,l=this.state.redirectLink,o=this.state.scraping,s=this.state.errors,c=this.state.site;return o?r.a.createElement("div",{id:"react-loader"},r.a.createElement(A.a,{type:"Puff",color:"#00BFFF",height:"200",width:"200"})," ...gathering data "):n?r.a.createElement(L.a,{to:{pathname:l,state:{site:c}}}):r.a.createElement("form",{onSubmit:this.handleSubmit,ref:function(t){return e.scrapeCreateForm=t}},r.a.createElement("h3",null,"Web Scraper ",r.a.createElement("small",null,"(This app currently only accepts yelp, and indeed links)")),r.a.createElement("div",{className:"form-group"},null===s?"":r.a.createElement("label",{htmlFor:"link"},r.a.createElement("small",{className:"errors"},s.link)),r.a.createElement("input",{type:"text",id:"link",name:"link",value:t,className:"form-control",placeholder:"Link",ref:this.scrapeLinkRef,onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"number",id:"page_amount",name:"page_amount",value:a||"",className:"form-control",placeholder:"Number of pages | NOTE: leave blank if you want to scrape ALL pages",ref:this.scrapePagesRef,onChange:this.handleInputChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Scrape"),"\xa0",r.a.createElement("button",{className:"btn btn-secondary",onClick:this.clearForm},"Clear"))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={slug:null,comms:[],commsListClass:"card",previous:null,author:!1,draft:null,count:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"loadComms",value:function(e){var t="/api/comms/";void 0!==e&&(t=e);var a=this,n={method:"GET",headers:{"Content-Type":"application/json"}},r=v.a.load("csrftoken");void 0!==r&&(n.credentials="include",n.headers["X-CSRFToken"]=r),fetch(t,n).then(function(e){return e.json()}).then(function(e){a.setState({comms:a.state.comms.concat(e.results.filter(function(e){return"scrape"===e.site_location&&!1===e.draft})),next:e.next,previous:e.previous,staff:e.staff,draft:e.draft,count:e.count})}).catch(function(e){console.log("error",e)})}},{key:"componentDidMount",value:function(){this.setState({comms:[],next:null,previous:null,count:0}),this.loadComms()}},{key:"render",value:function(){var e=this.state.comms;return r.a.createElement("div",{class:"container col-sm-10"},r.a.createElement("div",{className:"scrape_form"},r.a.createElement(U,null)),e.length>0?e.map(function(e,t){return r.a.createElement("div",{className:"comms"},r.a.createElement("h1",{class:"side-lines--double"},"Instructions"),void 0!==e?r.a.createElement(k.a,{source:e.content}):"")}):r.a.createElement("p",null,"No Messages To Display"))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).checkMobileState=function(){document.documentElement.clientWidth<=768&&a.setState({mobile:!0})},a.listenToScroll=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight);a.setState({pagePosition:e}),e>=.4&&!1===a.state.mobile&&a.setState({animate:!0}),!0===a.state.animate&&a.setState({aboutCardClass:"shadow card rounded-0 h-100",aboutCardAnimate:"card-animate"}),!0===a.state.mobile&&a.setState({aboutCardClass:"shadow card rounded-0 h-100"})},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(f.a)(a)),a.clearForm=a.clearForm.bind(Object(f.a)(a)),a.feedbackNameRef=r.a.createRef(),a.feedbackPhoneNumberRef=r.a.createRef(),a.feedbackEmailRef=r.a.createRef(),a.feedbackCommentsRef=r.a.createRef(),a.state={name:null,email:null,phone_number:null,comments:null,redirect:!1,redirectLink:null,errors:{},aboutCardClass:"shadow card rounded-0 invisible",aboutCardAnimate:"",animate:!1,mobile:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"createPost",value:function(e){var t=this,a=v.a.load("csrftoken"),n=this;if(void 0!==a){var r={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify(e),credentials:"include"};fetch("/api/landing/",r).then(function(e){return e.json()}).then(function(e){n.setState({redirectLink:"/"}),n.clearForm()}).catch(function(e){console.log("error",e),alert("An error occurred, please try again later.")}).then(function(){return t.setState({redirect:!0})})}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state;void 0===this.props.post?this.createPost(t):this.clearFormRefs()}},{key:"handleInputChange",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;"link"===t&&a.length>120&&alert("This link is too long"),this.setState(Object(T.a)({},t,a))}},{key:"clearForm",value:function(e){e&&e.preventDefault(),this.feedbackCreateForm.reset(),this.defaultState()}},{key:"clearFormRefs",value:function(){this.feedbackNameRef.current="",this.feedbackEmailRef.current="",this.feedbackPhoneNumberRef.current="",this.feedbackCommentsRef.current=""}},{key:"defaultState",value:function(){this.setState({name:"",email:"",phone_number:"",comments:""})}},{key:"componentDidMount",value:function(){this.checkMobileState(),!1===this.state.mobile&&window.addEventListener("scroll",this.listenToScroll);var e=this.props.post;void 0!==e?this.setState({name:e.name,email:e.email,phone_number:e.phone_number,comments:e.comments}):this.defaultState()}},{key:"render",value:function(){var e=this,t=this.state.name,a=this.state.email,n=this.state.phone_number,l=this.state.comments,o=this.state.redirect,s=this.state.redirectLink,c=this.state.aboutCardClass,i=this.state.aboutCardAnimate;return o?r.a.createElement(L.a,{to:s}):r.a.createElement("div",{className:"col-sm-6 py-2"},r.a.createElement("div",{className:c,id:i},r.a.createElement("form",{ref:function(t){return e.feedbackCreateForm=t}},r.a.createElement("h1",{className:"hook"},"Contact Us"),r.a.createElement("hr",{style:{display:"block",height:"1px",border:0,borderTop:"1px solid #ccc",margin:"0 1em",padding:"0",color:"#18181E"}}),r.a.createElement("div",{className:"card-body d-flex flex-column"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"name",name:"name",value:t,className:"form-control",placeholder:"Name",ref:this.feedbackNameRef,onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"email",name:"email",value:a,className:"form-control",placeholder:"Email",ref:this.feedbackEmailRef,onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"phone_number",name:"phone_number",value:n,className:"form-control",placeholder:"Phone Number",ref:this.feedbackPhoneNumberRef,onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{type:"text",id:"comments",name:"comments",style:{height:"15rem"},value:l,className:"form-control",placeholder:"Say Hi!",ref:this.feedbackCommentsRef,onChange:this.handleInputChange,required:"required"})),r.a.createElement("div",{className:"w-100 d-flex flex-column text-center"},r.a.createElement(j.a,{variant:"outline-dark",type:"submit"},"Submit"))))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).checkMobileState=function(){return document.documentElement.clientWidth<=768&&a.setState({mobile:!0}),a.state.mobile},a.listenToScroll=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight);a.setState({pagePosition:e}),e>=.4&&!1===a.state.mobile&&a.setState({animate:!0}),!0===a.state.animate&&a.setState({aboutCardClass:"shadow card rounded-0",aboutCardAnimate:"card-animate"}),!0===a.state.mobile&&a.setState({aboutCardClass:"shadow card rounded-0"})},a.state={slug:null,words:null,comms:[],about:[],aboutCardClass:"shadow card rounded-0 invisible",aboutCardAnimate:"",animate:!1,mobile:!1,previous:null,author:!1,draft:null,count:0,pagePosition:null,doneLoading:void 0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"loadComms",value:function(e){var t="/api/comms/";void 0!==e&&(t=e);var a=this,n={method:"GET",headers:{"Content-Type":"application/json"}},r=v.a.load("csrftoken");void 0!==r&&(n.credentials="include",n.headers["X-CSRFToken"]=r),fetch(t,n).then(function(e){return e.json()}).then(function(e){a.setState({comms:a.state.comms.concat(e.results.filter(function(e){return"landing-tag"===e.slug&&!1===e.draft})),about:a.state.about.concat(e.results.filter(function(e){return"about"===e.slug&&!1===e.draft})),next:e.next,previous:e.previous,staff:e.staff,draft:e.draft,count:e.count,doneLoading:!0})}).catch(function(e){console.log("error",e)})}},{key:"componentDidMount",value:function(){var e=this;this.checkMobileState(),!1===this.state.mobile&&window.addEventListener("scroll",this.listenToScroll),this.setState({comms:[],about:[],next:null,previous:null,count:0}),setTimeout(function(){e.loadComms()},1200),console.log(this.state.doneLoading)}},{key:"render",value:function(){var e=this.state.comms,t=this.state.about,a=this.state.aboutCardClass,n=this.state.aboutCardAnimate,l=(this.state.mobile,{display:"block",height:"1px",border:0,borderTop:"1px solid #ccc",margin:"0 1em",padding:"0",color:"#18181E"});return r.a.createElement("div",null,this.state.doneLoading?r.a.createElement("div",null,r.a.createElement("section",{className:"fork"},r.a.createElement("div",{className:"container",id:"top"},e.length>0?e.map(function(e,t){return r.a.createElement("div",{className:"tag"},void 0!==e?r.a.createElement(k.a,{source:e.content}):"")}):"",r.a.createElement("div",{class:"vl"}),r.a.createElement("div",{className:"btn-group-vertical"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("h3",null,"DataSet Builders: "),r.a.createElement("h5",null,"Select your data source below."),r.a.createElement("a",{id:"landing-btn",href:"/scrape/"},r.a.createElement("button",{class:"btn-fill"},"Yelp")),r.a.createElement("a",{id:"landing-btn",href:"/scrape/"},r.a.createElement("button",{className:"btn-fill"},"Indeed")),r.a.createElement(g.a,{id:"landing-btn",maintainScrollPosition:!1,to:{pathname:"/",state:{fromDashboard:!1}}},r.a.createElement("button",{class:"btn-flip"},"GlassDoor")),r.a.createElement(g.a,{id:"landing-btn",maintainScrollPosition:!1,to:{pathname:"/",state:{fromDashboard:!1}}},r.a.createElement("button",{class:"btn-flip"},"Twitter"))),r.a.createElement("hr",{style:l})))),r.a.createElement("section",{class:"about",id:"about"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 py-2"},t.length>0?t.map(function(e,t){return r.a.createElement("div",{className:a,id:n},r.a.createElement("h1",{class:"hook"},e.title),r.a.createElement("hr",{style:l}),r.a.createElement("div",{className:"card-body d-flex flex-column"},r.a.createElement("h5",{className:"card-title"},"Democratizing the Worlds Data"),r.a.createElement("p",{className:"card-text"},void 0!==e?r.a.createElement(k.a,{source:e.content}):"")))}):""),r.a.createElement(J,null))))):r.a.createElement("div",{className:"loading"},r.a.createElement(R.a,{type:"bars",color:"white",height:"15%",width:"15%",id:"spinner"})))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={slug:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"loadCommsView",value:function(){this.setState({CommsView:!0})}},{key:"render",value:function(){this.state.blocks;return r.a.createElement("div",null,r.a.createElement("h2",null,"Main Page"))}}]),t}(n.Component),B=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{exact:!0,path:"/site-management/",component:G}),r.a.createElement(p.a,{exact:!0,path:"/site-management/comms/create",component:D}),r.a.createElement(p.a,{exact:!0,path:"/site-management/comms/:slug/edit",component:D}),r.a.createElement(p.a,{exact:!0,path:"/site-management/comms/",component:O}),r.a.createElement(p.a,{exact:!0,path:"/site-management/comms/:slug",component:x}),r.a.createElement(p.a,{exact:!0,path:"/scrape/",component:X}),r.a.createElement(p.a,{exact:!0,path:"/scrape/results/:slug",component:M}),r.a.createElement(p.a,{exact:!0,path:"",component:W})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,a){e.exports=a(168)},54:function(e,t,a){},55:function(e,t,a){}},[[48,1,2]]]);
//# sourceMappingURL=main.chunk.js.map